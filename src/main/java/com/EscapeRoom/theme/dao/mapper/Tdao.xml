<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
	<mapper namespace="com.EscapeRoom.theme.dao.ThemeDao">
		<insert id="insertform" parameterType="com.EscapeRoom.theme.dto.ThemeDto">
			insert into theme(tid,tname,tgenre,tdifficulty,ttime,tprofile,tphoto)
			values(theme_seq.nextval,#{tname},#{tgenre},#{tdifficulty},#{ttime},#{tprofile},#{tphoto})
		</insert>
		
		<select id="themeList" resultType="com.EscapeRoom.theme.dto.ThemeDto">
			SELECT * FROM THEME ORDER BY TID ASC
		</select>
		
		<select id="themeDetailsPage" resultType="com.EscapeRoom.theme.dto.ThemeDto">
			SELECT * FROM THEME WHERE TID = #{tid}
		</select>
		
		<select id="themeEdit" resultType="com.EscapeRoom.theme.dto.ThemeDto">
			SELECT * FROM THEME WHERE TID = #{tid}
		</select>
		
		<update id="edit" parameterType="com.EscapeRoom.theme.dto.ThemeDto">
			UPDATE THEME SET
			TNAME = #{tname},
			TGENRE = #{tgenre},
			TDIFFICULTY = #{tdifficulty},
			TTIME = #{ttime},
			TPROFILE = #{tprofile},
			TPHOTO = #{tphoto}
			WHERE TID = #{tid}
		</update>
		
		<delete id="delete">
			DELETE FROM THEME WHERE TID = #{tid}
		</delete>
		
		<!-- reserve용도용1-->
		
		<select id="themeNameList" resultType="com.EscapeRoom.theme.dto.ThemeDto">
			select * from theme order by tid desc
		</select>
		
		<select id="themeImage" parameterType="String" resultType="com.EscapeRoom.theme.dto.ThemeDto">
			select * from theme where tid = #{tid}
		</select>
		
		<select id="reserveTop3" resultType="int">
			select count(*) as cnt from reserve group by tid order by count(*) desc;
		</select>
		
		<select id="reserveTop3133" resultType="com.EscapeRoom.theme.dto.ThemeDto">
			select tid from reserve group by tid order by count(*) desc;
		</select>
		
		<select id="top3Image" resultType="com.EscapeRoom.theme.dto.ThemeDto">
			select * from theme where tid = #{tid}
		</select>
	</mapper>